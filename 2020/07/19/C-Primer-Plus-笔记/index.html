<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>C Primer Plus 笔记 - BakaFT&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BakaFT&#039;s blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BakaFT&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="简介存一些零碎知识点 开的有点迟，前面的没记"><meta property="og:type" content="blog"><meta property="og:title" content="C Primer Plus 笔记"><meta property="og:url" content="https://bakaft.github.io/2020/07/19/C-Primer-Plus-%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="BakaFT&#039;s blog"><meta property="og:description" content="简介存一些零碎知识点 开的有点迟，前面的没记"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://bakaft.github.io/img/og_image.png"><meta property="article:published_time" content="2020-07-19T09:17:55.000Z"><meta property="article:modified_time" content="2023-12-28T08:42:40.251Z"><meta property="article:author" content="BakaFT"><meta property="article:tag" content="C"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bakaft.github.io/2020/07/19/C-Primer-Plus-%E7%AC%94%E8%AE%B0/"},"headline":"C Primer Plus 笔记","image":["https://bakaft.github.io/img/og_image.png"],"datePublished":"2020-07-19T09:17:55.000Z","dateModified":"2023-12-28T08:42:40.251Z","author":{"@type":"Person","name":"BakaFT"},"publisher":{"@type":"Organization","name":"BakaFT's blog","logo":{"@type":"ImageObject","url":{"text":"BakaFT's blog"}}},"description":"简介存一些零碎知识点 开的有点迟，前面的没记"}</script><link rel="canonical" href="https://bakaft.github.io/2020/07/19/C-Primer-Plus-%E7%AC%94%E8%AE%B0/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/highlight.js@9.12.0/styles/idea.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://fastly.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 6.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">BakaFT&#039;s blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-07-19T09:17:55.000Z" title="7/19/2020, 9:17:55 AM">2020-07-19</time></span></div></div><h1 class="title is-3 is-size-4-mobile">C Primer Plus 笔记</h1><div class="content"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>存一些零碎知识点</p>
<p>开的有点迟，前面的没记</p>
<span id="more"></span>
<h2 id="逗号表达式"><a href="#逗号表达式" class="headerlink" title="逗号表达式"></a>逗号表达式</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = (<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="type">int</span> y = <span class="number">2</span>,<span class="number">3</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,x,y);</span><br><span class="line"><span class="comment">// x=3 y=2</span></span><br></pre></td></tr></table></figure>

<h1 id="7"><a href="#7" class="headerlink" title="7"></a>7</h1><h2 id="else-if-的本质"><a href="#else-if-的本质" class="headerlink" title="else if 的本质"></a>else if 的本质</h2><p>实际上，else if 是己学过的 if else 语句的变式。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (kwh &lt;= BREAK1)</span><br><span class="line">    bill = RATE1 * kwh;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (kwh &lt;= BREAK2)   <span class="comment">// kwh between 360 and 468     </span></span><br><span class="line">    bill = BASE1 + (RATE2 * (kwh - BREAK1));</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (kwh &lt;= BREAK3)   <span class="comment">// kwh betweent 468 and 720</span></span><br><span class="line">    bill = BASE2 + (RATE3 * (kwh - BREAK2));</span><br><span class="line"><span class="keyword">else</span>                      <span class="comment">// kwh above 680               </span></span><br><span class="line">    bill = BASE3 + (RATE4 * (kwh - BREAK3));</span><br></pre></td></tr></table></figure>

<p>其与如下代码等价</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (kwh &lt;= BREAK1)</span><br><span class="line">    bill = RATE1 * kwh;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> (kwh &lt;= BREAK2) <span class="comment">// 360~468 kwh</span></span><br><span class="line">    bill = BASE1 + (RATE2 * (kwh - BREAK1));</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> (kwh &lt;= BREAK3) <span class="comment">// 468~720 kwh</span></span><br><span class="line">        bill = BASE2 + (RATE3 * (kwh - BREAK2));</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// 超过 720 kwh</span></span><br><span class="line">            bill = BASE3 + (RATE4 * (kwh - BREAK3));</span><br></pre></td></tr></table></figure>

<h2 id="else-与-if-的配对规则"><a href="#else-与-if-的配对规则" class="headerlink" title="else 与 if 的配对规则"></a>else 与 if 的配对规则</h2><p><strong>如果没有花括号，else 与离它最近的 if 匹配，除非最近的 if 被花括号括起来</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (number &gt;<span class="number">6</span>)</span><br><span class="line">	<span class="keyword">if</span> (number &lt;<span class="number">12</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case a\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Case b\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>如果<code>number</code>的值是 5，程序将没有输出。</p>
<p>因为例中的 else 是和第二个 if 匹配的，改变一下缩进可能会更加明显。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (number &gt;<span class="number">6</span>)</span><br><span class="line">	<span class="keyword">if</span> (number &lt;<span class="number">12</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case a\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case b\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="条件运算符"><a href="#条件运算符" class="headerlink" title="条件运算符"></a>条件运算符</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = (y&lt;<span class="number">0</span>) ?-y:y;</span><br></pre></td></tr></table></figure>

<h2 id="switch-语句"><a href="#switch-语句" class="headerlink" title="switch 语句"></a>switch 语句</h2><p>case 下记得放个 break, 否则会匹配后面所有 case</p>
<h2 id="goto-语句"><a href="#goto-语句" class="headerlink" title="goto 语句"></a>goto 语句</h2><p>一般用于跳出多层循环</p>
<h1 id="9"><a href="#9" class="headerlink" title="9"></a>9</h1><h2 id="return-语句"><a href="#return-语句" class="headerlink" title="return 语句"></a>return 语句</h2><p>C 中，return 语句无法返回两个及以上的值，必要可使用指针进行操作</p>
<h2 id="间接运算符"><a href="#间接运算符" class="headerlink" title="间接运算符"></a>间接运算符</h2><h3 id="声明指针"><a href="#声明指针" class="headerlink" title="声明指针"></a>声明指针</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> * ptr = &amp;num;</span><br></pre></td></tr></table></figure>

<h3 id="求值-解引用"><a href="#求值-解引用" class="headerlink" title="求值(解引用)"></a>求值(解引用)</h3><p>其实就是<code>取指针指向的地址的内容</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val = *ptr;</span><br></pre></td></tr></table></figure>

<h1 id="10"><a href="#10" class="headerlink" title="10"></a>10</h1><h2 id="未指定长度的不可变数组"><a href="#未指定长度的不可变数组" class="headerlink" title="未指定长度的不可变数组"></a>未指定长度的不可变数组</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> <span class="built_in">array</span>[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="指定初始化容器-C99"><a href="#指定初始化容器-C99" class="headerlink" title="指定初始化容器(C99)"></a>指定初始化容器(C99)</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MONTHS 12</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> days[MONTHS] = &#123;<span class="number">31</span>,<span class="number">28</span>, [<span class="number">4</span>] = <span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>, [<span class="number">1</span>] = <span class="number">29</span>&#125;;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MONTHS; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%2d  %d\n&quot;</span>, i + <span class="number">1</span>, days[i]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  output:</span></span><br><span class="line"><span class="comment">//  1  31</span></span><br><span class="line"><span class="comment">//  2  29</span></span><br><span class="line"><span class="comment">//  3  0</span></span><br><span class="line"><span class="comment">//  4  0</span></span><br><span class="line"><span class="comment">//  5  31</span></span><br><span class="line"><span class="comment">//  6  30</span></span><br><span class="line"><span class="comment">//  7  31</span></span><br><span class="line"><span class="comment">//  8  0</span></span><br><span class="line"><span class="comment">//  9  0</span></span><br><span class="line"><span class="comment">// 10  0</span></span><br><span class="line"><span class="comment">// 11  0</span></span><br><span class="line"><span class="comment">// 12  0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 稍作变化</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MONTHS 7</span></span><br><span class="line"><span class="type">int</span> days[MONTHS] = &#123;[<span class="number">4</span>] = <span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">//  1  0</span></span><br><span class="line"><span class="comment">//  2  0</span></span><br><span class="line"><span class="comment">//  3  0</span></span><br><span class="line"><span class="comment">//  4  0</span></span><br><span class="line"><span class="comment">//  5  31</span></span><br><span class="line"><span class="comment">//  6  30</span></span><br><span class="line"><span class="comment">//  7  31</span></span><br></pre></td></tr></table></figure>

<p>这种方法可以用于初始化指定位置的元素，而初始化其之前的元素</p>
<p>注意到，第一个例子中，对索引为<code>1</code>的元素进行了重复赋值，编译器选择使用第二次的值覆盖了第一次的值</p>
<p><strong>如果这种初始化方法用于未指定长度的数组会怎么样？</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="built_in">array</span>[] = &#123;<span class="number">1</span>,[<span class="number">1</span>] = <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>编译器会创建一个能装得下初始化数值的数组，即长度为<code>6</code>的数组</p>
<h2 id="数组下标越界的后果"><a href="#数组下标越界的后果" class="headerlink" title="数组下标越界的后果"></a>数组下标越界的后果</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bounds.c -- exceed the bounds of an array</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIZE 4</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> value1 = <span class="number">44</span>;</span><br><span class="line">    <span class="type">int</span> arr[SIZE];</span><br><span class="line">    <span class="type">int</span> value2 = <span class="number">88</span>;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;value1 = %d, value2 = %d\n&quot;</span>, value1, value2);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">-1</span>; i &lt;= SIZE; i++)</span><br><span class="line">        arr[i] = <span class="number">2</span> * i + <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">-1</span>; i &lt; <span class="number">7</span>; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%2d  %d\n&quot;</span>, i , arr[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;value1 = %d, value2 = %d\n&quot;</span>, value1, value2);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;address of arr[-1]: %p\n&quot;</span>, &amp;arr[<span class="number">-1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;address of value1:  %p\n&quot;</span>, &amp;value1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;address of value2:  %p\n&quot;</span>, &amp;value2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;address of arr[6]:  %p\n&quot;</span>, &amp;arr[<span class="number">6</span>]);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// value1 = 44, value2 = 88</span></span><br><span class="line"><span class="comment">// -1  -1</span></span><br><span class="line"><span class="comment">//  0  1</span></span><br><span class="line"><span class="comment">//  1  3</span></span><br><span class="line"><span class="comment">//  2  5</span></span><br><span class="line"><span class="comment">//  3  7</span></span><br><span class="line"><span class="comment">//  4  9</span></span><br><span class="line"><span class="comment">//  5  0</span></span><br><span class="line"><span class="comment">//  6  44</span></span><br><span class="line"><span class="comment">// value1 = 44, value2 = -1</span></span><br><span class="line"><span class="comment">// address of arr[-1]: 000000000061FDFC</span></span><br><span class="line"><span class="comment">// address of value1:  000000000061FE18</span></span><br><span class="line"><span class="comment">// address of value2:  000000000061FDFC</span></span><br><span class="line"><span class="comment">// address of arr[6]:  000000000061FE18</span></span><br></pre></td></tr></table></figure>

<p>注意，<code>value2</code>和<code>arr[-1]</code>的内存地址相同，<code>value1</code>和<code>arr[6]</code>的内存地址相同，而<code>arr</code>的正常索引范围应该是<code>0-3</code></p>
<p>在对数组进行循环赋值后，<code>value2</code>的值发生了变化</p>
<p>这意味着，在修改数组元素的值时，如果下标越界，会修改<strong>数组之外的内存地址</strong>的值，可能是某个变量，也可能是其他东西</p>
<h2 id="VLA-C99"><a href="#VLA-C99" class="headerlink" title="VLA(C99)"></a>VLA(C99)</h2><p>C99 之前，声明数组的时候方括号里的数字，也就是数组的长度，只能使用<strong>整型常量表达式</strong>，且运算结果大于 0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> test[<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span> arr[(<span class="type">int</span>)<span class="number">2.5</span>];</span><br><span class="line"><span class="type">int</span> arr[<span class="number">2</span>*<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span> arr[<span class="keyword">sizeof</span>(test)];</span><br></pre></td></tr></table></figure>

<p>C99 中，允许<strong>变量</strong>表示数组长度</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n = <span class="number">8</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> m = <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span> arr[n];</span><br><span class="line"><span class="type">int</span> arr[m]; <span class="comment">// C99/C11允许</span></span><br></pre></td></tr></table></figure>

<p>这就是 VLA (Variable-length-array)，可变长度数组</p>
<p>VLA 必须是自动储存类别，这意味着它无法使用<code>static</code>,<code>extern</code>等储存类别说明符修饰</p>
<p>另外，在作为<strong>形参</strong>声明时，变量必须先于数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> ar[col][row], <span class="type">int</span> col, <span class="type">int</span> row)</span>; <span class="comment">// 无效</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> col, <span class="type">int</span> row, <span class="type">int</span> ar[col][row])</span>; <span class="comment">// 合法</span></span><br></pre></td></tr></table></figure>

<p>在<strong>函数原型</strong>中，可以如下声明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>[*][*])</span>; <span class="comment">// 省略变量名后，使用星号替代</span></span><br></pre></td></tr></table></figure>

<h2 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> test[<span class="number">2</span>][<span class="number">2</span>] = &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;  <span class="comment">// 更真实地反应内部储存方式</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The first number is %d\n&quot;</span>,test[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The last number is %d&quot;</span>,test[<span class="number">1</span>][<span class="number">1</span>]); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> test[<span class="number">2</span>][<span class="number">2</span>] =  <span class="comment">// 更加的直观	</span></span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">        &#123;<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The first number is %d\n&quot;</span>,test[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The last number is %d&quot;</span>,test[<span class="number">1</span>][<span class="number">1</span>]); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// The first number is 0</span></span><br><span class="line"><span class="comment">// The last number is 3</span></span><br></pre></td></tr></table></figure>

<p>同样地，如果某个数组未初始化完全，剩下的值会被设为 0</p>
<p>如果某个数组初始化时元素数量超过了数组长度，<strong>不会影响其他数组的初始化</strong></p>
<h3 id="二维数组的”内层越界”"><a href="#二维数组的”内层越界”" class="headerlink" title="二维数组的”内层越界”"></a>二维数组的”内层越界”</h3><p>二维数组看作是一种特殊的一维数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> test[<span class="number">2</span>][<span class="number">2</span>] = </span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>&#125;,</span><br><span class="line">        &#123;<span class="number">2234</span>,<span class="number">3</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The number is %d\n&quot;</span>,test[<span class="number">0</span>][<span class="number">2</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>猜猜输出是多少？是<code>2234</code></p>
<p>数组的第一行在初始化的时候输入了 4 个元素，但是因为每行长度为<code>2</code>，所以后面两个元素被舍弃</p>
<p>最后的数组应该是这样</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">	&#123;<span class="number">2234</span>,<span class="number">3</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>test[0][2]</code>，想想似乎是越界的，因为每个数组索引最大是<code>1</code></p>
<p>但是 C 语言的二维数组储存是<code>一维线性顺序储存</code>的，并且按照<code>行优先</code>原则，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">二维数组A[m][n]按行优先存储的线性序列为：</span><br><span class="line">A[0][0]、A[1][0]…A[m][0]、A[0][1]、A[1][1]…A[m][1]…A[m][1]、A[0][n]…A[m][n]</span><br></pre></td></tr></table></figure>

<p>这么来说，</p>
<p>对于二维数组<code>A[m][n]</code>，可以<strong>理解</strong>为长度为<code>m*n</code>的一维数组</p>
<p><code>A[i][j]</code>等效于一维下的<code>A[i*m+j]</code>，但是写<code>A[2]</code><strong>并不会</strong>返回<code>2234</code>，而是返回一个垃圾值</p>
<p>如果按照上一行的推理，<code>[0][2]</code>就相当于<code>[1][0]</code>，因为<code>0*0+2=1*2+0</code>所以上例的输出是<code>2234</code></p>
<p>回味一下，是不是明白了什么？	</p>
<h2 id="数组与指针"><a href="#数组与指针" class="headerlink" title="数组与指针"></a>数组与指针</h2><h3 id="数组名其实是一个常量指针"><a href="#数组名其实是一个常量指针" class="headerlink" title="数组名其实是一个常量指针"></a>数组名其实是一个常量指针</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> test[<span class="number">2</span>] =&#123;<span class="number">2345</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">34</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span> (test == &amp;test[<span class="number">0</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,*test,test[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%p %p&quot;</span>,test,&amp;test[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;   </span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// 2345 2345</span></span><br><span class="line"><span class="comment">// 000000000061FE18 000000000061FE18</span></span><br></pre></td></tr></table></figure>

<p><code>数组名</code>是该数组首个元素的<code>地址</code></p>
<p>类似的，下面两个表达式均为真</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dates + <span class="number">2</span> == &amp;dates[<span class="number">2</span>]; <span class="comment">// 地址==地址</span></span><br><span class="line">*(dates + <span class="number">2</span>) == dates[<span class="number">2</span>];<span class="comment">// 值==值</span></span><br></pre></td></tr></table></figure>

<p>因为是<strong>常量指针</strong>，所以任何对数组名的赋值操作都是非法的</p>
<p>但是你可以创建一个同类型指针来替代它</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> sum;</span><br><span class="line">    <span class="type">int</span> test[<span class="number">4</span>] =&#123;<span class="number">200</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">34</span>&#125;;</span><br><span class="line">    <span class="type">int</span> *p = test;</span><br><span class="line">    <span class="keyword">while</span> (p &lt; &amp;test[<span class="number">4</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        sum += *p;</span><br><span class="line">        p++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,sum);</span><br><span class="line">&#125;   </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output:</span></span><br><span class="line"><span class="comment">237</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="指针-1-在数组中的体现"><a href="#指针-1-在数组中的体现" class="headerlink" title="指针+1 在数组中的体现"></a>指针+1 在数组中的体现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pnt_add.c -- pointer addition</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIZE 4</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">short</span> dates [SIZE];</span><br><span class="line">    <span class="type">short</span> * pti;</span><br><span class="line">    <span class="type">short</span> index;</span><br><span class="line">    <span class="type">double</span> bills[SIZE];</span><br><span class="line">    <span class="type">double</span> * ptf;</span><br><span class="line">    </span><br><span class="line">    pti = dates;    <span class="comment">// assign address of array to pointer</span></span><br><span class="line">    ptf = bills;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%23s %15s\n&quot;</span>, <span class="string">&quot;short&quot;</span>, <span class="string">&quot;double&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; SIZE; index ++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;pointers + %d: %10p %10p\n&quot;</span>,</span><br><span class="line">               index, pti + index, ptf + index);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">                  short          double</span></span><br><span class="line"><span class="comment">pointers + 0: 000000000061FE00 000000000061FDE0</span></span><br><span class="line"><span class="comment">pointers + 1: 000000000061FE02 000000000061FDE8</span></span><br><span class="line"><span class="comment">pointers + 2: 000000000061FE04 000000000061FDF0</span></span><br><span class="line"><span class="comment">pointers + 3: 000000000061FE06 000000000061FDF8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>你可能会疑问，上面的地址运算结果不对， <code>61FE00</code> +1 应该是<code>61FE01</code></p>
<p>但其实 C 中的指针+1，是指增加一个<code>储存单元</code>，对于数组而言，就是下一个元素的地址，而不是下一个字节的地址</p>
<p>这也是为什么指针要声明类型，因为每种类型的长度不同。如例中<code>short</code>为 2，<code>double</code>为 8</p>
<h3 id="C-对数组的定义"><a href="#C-对数组的定义" class="headerlink" title="C 对数组的定义"></a>C 对数组的定义</h3><p>C 标准在描述数组表示法时借用了指针的概念</p>
<blockquote>
<p>ar[n] &#x3D;&#x3D; *(ar+n)</p>
</blockquote>
<p>*(ar + n)可以理解为，到内存的 ar 位置，移动 n 个单元后，取当前位置值。</p>
<p>*为间接运算符，此处起<code>解引用</code>作用</p>
<h3 id="如何在函数形参表示数组"><a href="#如何在函数形参表示数组" class="headerlink" title="如何在函数形参表示数组"></a>如何在函数形参表示数组</h3><p>数组名其实是数组中首个元素的地址，所以在传入数组的时候，其实传入的是一个地址</p>
<p>所以可以在<code>函数定义</code>中这么写</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> *<span class="built_in">array</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> ar[])</span>;</span><br></pre></td></tr></table></figure>

<p>第二种不但表示指针<code>ar</code>指向<code>int</code>类型，还是一个<code>int</code>类型的数组，但<code>int ar[]</code>这种写法只能在声明形参时使用</p>
<p>由于<code>函数原型</code>可以省略参数名，你还可以在<code>函数原型中</code>这么写</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> *)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> [])</span>;</span><br></pre></td></tr></table></figure>

<h2 id="不要在函数内求数组大小"><a href="#不要在函数内求数组大小" class="headerlink" title="不要在函数内求数组大小"></a>不要在函数内求数组大小</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="built_in">array</span>[<span class="number">5</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,<span class="keyword">sizeof</span>(<span class="built_in">array</span>),<span class="keyword">sizeof</span>(<span class="built_in">array</span>[<span class="number">0</span>]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">array_max</span><span class="params">(<span class="type">int</span> <span class="built_in">array</span>[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,<span class="keyword">sizeof</span>(<span class="built_in">array</span>),<span class="keyword">sizeof</span>(<span class="built_in">array</span>[<span class="number">0</span>]));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>,<span class="keyword">sizeof</span>(<span class="type">int</span>*));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">20 4 </span></span><br><span class="line"><span class="comment">8  4  8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>两次的输出不一样，为什么？</p>
<p><strong>当数组作为函数的参数进行传递时，该数组自动退化为同类型的指针</strong></p>
<p>对于<code>main</code>函数来说，array 是一个数组，可以直接用 sizeof 求出其”长度”，5 个 int 嘛，所以是 20</p>
<p>对于<code>array_max</code>函数来说，array 是一个整型<code>指针</code>，用 sizeof 求 array 大小，就相当于<code>sizeof(int*)</code>，在我的电脑上永远是 8</p>
<h2 id="指针操作"><a href="#指针操作" class="headerlink" title="指针操作"></a>指针操作</h2><h3 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h3><p>把地址赋给指针，可使用<code>数组名</code>，<code>&amp;</code>，另一个<code>指针</code>等</p>
<h3 id="解引用"><a href="#解引用" class="headerlink" title="解引用"></a>解引用</h3><p><code>*ptr</code>取得指针所指向地址上的值</p>
<h3 id="取址"><a href="#取址" class="headerlink" title="取址"></a>取址</h3><p>指针变量也有自己的值和地址</p>
<p>指针的值即为<code>指向的地址</code></p>
<p>指针的值可以通过<code>&amp;</code>取得</p>
<h3 id="递增-减"><a href="#递增-减" class="headerlink" title="递增(减)"></a>递增(减)</h3><p><code>ptr++</code>  <code>ptr--</code></p>
<p>递增<code>指向数组元素</code>的指针可以让指针指向<code>下一个元素</code>，或者<code>上一个元素</code></p>
<h3 id="与整数相加-减"><a href="#与整数相加-减" class="headerlink" title="与整数相加(减)"></a>与整数相加(减)</h3><p><code>ptr + 1</code>  ，指向下一个元素</p>
<p>整数会和指针指向的类型的大小(字节为单位)相乘，然后结果与地址相加(减去)，差不多就是多次递增(或者递减)</p>
<h3 id="指针求差"><a href="#指针求差" class="headerlink" title="指针求差"></a>指针求差</h3><p>求出两个指针之间的差值</p>
<p>通常来说，两个指针分别指向<code>同一个数组</code>的不同元素，差值的单位与数组类型的单位相同</p>
<p>例如，</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> ar[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="type">int</span> *ptr1 = &amp;ar[<span class="number">0</span>];</span><br><span class="line"><span class="type">int</span> *ptr2 = &amp;ar[<span class="number">2</span>];</span><br></pre></td></tr></table></figure>

<p>如果对两指针求差，<code>ptr2 - ptr1</code> 得到的值将会是<code>2</code>，是指两个指针所指向的元素相隔两个<code>int</code>，而不是 2 字节</p>
<h2 id="Const-指针"><a href="#Const-指针" class="headerlink" title="Const 指针"></a>Const 指针</h2><p>对于一个<code>const</code>指针，它可以指向<code>const</code>或<code>非const</code>数据，但是无法通过指针对数据进行任何修改</p>
<p>对于<code>非const</code>指针，它只能指向<code>非const</code>数据，否则通过指针就能改变数据(注意，的确可以通过这种方式修改 const 数据，但是这违背了的初衷)</p>
<h2 id="指针和多维数组"><a href="#指针和多维数组" class="headerlink" title="指针和多维数组"></a>指针和多维数组</h2><p>给出一个二维数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> zippo[<span class="number">4</span>][<span class="number">2</span>]=</span><br><span class="line">&#123;</span><br><span class="line">    &#123;<span class="number">1</span>,<span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="number">2342</span>,<span class="number">34</span>&#125;,</span><br><span class="line">    &#123;<span class="number">242</span>,<span class="number">234</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>有下列等式成立</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zippo == &amp;zippo[<span class="number">0</span>]</span><br><span class="line">zippo[<span class="number">0</span>] == &amp;zippo[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">*zippo == &amp;zippo[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">**zippo == zippo[<span class="number">0</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<p>因为<strong>数组名是其首元素的地址</strong>，所以前两条很容易得到</p>
<p>那么在加上解引用符号<code>*</code>，就可以得到下面的两个式子。</p>
<p>解引用两次才能得到原始值，这被称为<code>双重间接</code></p>
<h2 id="指向多维数组的指针"><a href="#指向多维数组的指针" class="headerlink" title="指向多维数组的指针"></a>指向多维数组的指针</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> (*pz)[<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> * pax[<span class="number">2</span>];</span><br></pre></td></tr></table></figure>

<p>考虑一下，有什么区别？</p>
<p><code>pz</code>指向一个内含两个 int 类型值的<code>数组</code>，是一个指针</p>
<p><code>pax</code>是一个内含两个指针的<code>数组</code>，每个元素都是指向 int 类型型的指针</p>
<p><strong>为什么</strong>?</p>
<p>由于<code>()</code>的存在，pz 首先与<code>*</code>结合，因此声明的是一个指向数组(内含两个 int 型元素)的指针</p>
<p>由于<code>[]</code>优先级更高，先与 pax 结合，从而声明了一个<code>数组</code>，随后<code>*</code>又表示数组内的元素是指针</p>
<p>举个例子</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">3</span>][<span class="number">5</span>] =</span><br><span class="line">        &#123;</span><br><span class="line">            &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;,</span><br><span class="line">            &#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;,</span><br><span class="line">            &#123;<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> (*p)[<span class="number">5</span>] = a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,**p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例中声明一个<code>p</code>指针，指向一个包含 5 个元素的数组，并在初始化时指向二维数组中的第一个数组(数组名就是首元素地址)</p>
<p>此时<code>p</code>值为<code>&#123;1,2,3,4,5&#125;</code>的地址</p>
<p>第一次解引用的对象是指针<code>p</code>，也就是{1,2,3,4,5}<code>的地址，得到了其值(</code>1&#96;的地址)</p>
<p>第二次解引用的对象指针<code>&#123;1,2,3,4,5&#125;</code>，也就是是<code>1</code>的地址，得到了其值，即为<code>1</code></p>
<p><strong>一般而言，指向多维数组的指针如下进行声明</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="built_in">array</span>[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>]; </span><br><span class="line">    <span class="built_in">array</span>[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1234</span>;</span><br><span class="line">    <span class="built_in">array</span>[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">1</span>] = <span class="number">12345</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>(*p1)[<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>] = <span class="built_in">array</span>; <span class="comment">// 指向五维数组 array</span></span><br><span class="line">    <span class="type">int</span>(*p2)[<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>] = <span class="built_in">array</span>[<span class="number">0</span>]; <span class="comment">// 指向四维数组 array[0]</span></span><br><span class="line">    <span class="type">int</span>(*p3)[<span class="number">4</span>][<span class="number">5</span>] = <span class="built_in">array</span>[<span class="number">0</span>][<span class="number">0</span>]; <span class="comment">// 指向三维数组 array[0][0]</span></span><br><span class="line">    <span class="type">int</span>(*p4)[<span class="number">5</span>] = <span class="built_in">array</span>[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]; <span class="comment">// 指向二维数组 array[0][0][0]</span></span><br><span class="line">    <span class="type">int</span>(*p5) = <span class="built_in">array</span>[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]; <span class="comment">// 指向一维数组 array[0][0][0][0]</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d %d\n&quot;</span>,*****(p1),****p2,***p3,**p4,*p5);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d %d&quot;</span>,*(****p1+<span class="number">1</span>),*(***p2+<span class="number">1</span>),*(**p3+<span class="number">1</span>),*(*p4+<span class="number">1</span>),*(p5+<span class="number">1</span>));</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1234 1234 1234 1234 1234</span></span><br><span class="line"><span class="comment">    12345 12345 12345 12345 12345</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果是作为函数的<strong>形参</strong>，则可以这么写</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">( <span class="type">int</span> [][<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>] )</span>; <span class="comment">// 需要传入一个指向五维数的指针</span></span><br></pre></td></tr></table></figure>

<h2 id="复合字面量-C99"><a href="#复合字面量-C99" class="headerlink" title="复合字面量(C99)"></a>复合字面量(C99)</h2><p><del>不就是匿名数组吗</del></p>
<p><strong>字面量是啥？</strong> 简单说，<code>5</code>是一个 int 字面量，<code>5.56</code>是一个 double 字面量,<code>&#39;y&#39;</code>是一个 char 字面量…</p>
<p>复合字面量有点像数组，把很多同类字面量放到一起</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">2</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>&#125;; <span class="comment">//平时的数组</span></span><br><span class="line">(<span class="type">int</span> [<span class="number">2</span>] ) &#123;<span class="number">1</span>,<span class="number">2</span>&#125;; <span class="comment">//复合字面量</span></span><br></pre></td></tr></table></figure>

<p>因为复合字面量是<strong>匿名</strong>的，所以必须在创建的时候就使用它，指针是一种方法</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> *p = (<span class="type">int</span>[<span class="number">2</span>])&#123;<span class="number">2323</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, *p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，复合字面量也具有类似数组名的特性，<code>p</code>在这里指向了第一个元素<code>2323</code>的地址。</p>
<h1 id="11"><a href="#11" class="headerlink" title="11"></a>11</h1><h2 id="字符串字面量"><a href="#字符串字面量" class="headerlink" title="字符串字面量"></a>字符串字面量</h2><p>用双引号括起来的内容称为字符串字面量（string literal），也叫作字符串常量（string constant)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span> *ptr = <span class="string">&quot;Hello！&quot;</span> <span class="comment">//等号右边就是一个字符串字面量</span></span><br></pre></td></tr></table></figure>

<p>通常，字符串都作为可执行文件的一部分储存在数据段中</p>
<p>当把程序载入内存时，也载入了程序中的字符串</p>
<p>一般来说,字符串字面量被视为 <strong>const 数据</strong>。这意味着你不能修改字符串字面量，这是一种未定义行为。</p>
<p>用两行代码来举例</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> * word = <span class="string">&quot;frame&quot;</span>;</span><br><span class="line">word[<span class="number">1</span>] = <span class="string">&#x27;l&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>第一行的写法并不被 ISO C 所推荐</p>
<blockquote>
<p>ISO C++ forbids converting a string constant to ‘char*’ [-Wwrite-strings]</p>
<p>这也强调了，字符串字面量不应被修改</p>
</blockquote>
<p>改为如下写法即可解决</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="type">const</span> * word = <span class="string">&quot;frame&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>但即使这样，第二行有效吗？</p>
<p>各个编译器有自己的说法，C primer plus 的作者运行环境下允许如此，而我自己的 Mingw gcc 下编译运行后直接<code>Segmentation fault</code></p>
<p>所以，不要动字符串字面量，至少不应该</p>
<h2 id="字符串字面量和字符串数组"><a href="#字符串字面量和字符串数组" class="headerlink" title="字符串字面量和字符串数组"></a>字符串字面量和字符串数组</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="type">const</span> <span class="type">char</span> *mytalents[<span class="number">5</span>] = &#123;</span><br><span class="line">        <span class="string">&quot;Adding numbers swiftly&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Multiplying accurately&quot;</span>, <span class="string">&quot;Stashing data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Following instructions to the letter&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Understanding the C language&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> yourtalents[<span class="number">5</span>][<span class="number">10</span>] = &#123;</span><br><span class="line">        <span class="string">&quot;Walking in a straight line&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Sleeping&quot;</span>, <span class="string">&quot;Watching television&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Mailing letters&quot;</span>, <span class="string">&quot;Reading email&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\nsizeof mytalents: %zd, sizeof yourtalents: %zd\n&quot;</span>,</span><br><span class="line">           <span class="keyword">sizeof</span>(mytalents), <span class="keyword">sizeof</span>(yourtalents))</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">sizeof mytalents: 40, sizeof yourtalents: 200</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><code>mytalents</code>是一个包含了 5 个指针元素的一维数组，大小为 5*8&#x3D;40</p>
<p><code>yourtalents</code>是一个包含了 5 个数组(字符串数组)的二维数组，每个子数组大小为 10×4&#x3D;40，总大小为 5×10×4 &#x3D; 200</p>
<p><code>mytalents</code>中的指针指向字符串字面量的地址，而<code>yourtalents</code>中储存的是字符串字面量的<strong>副本</strong>，也就是说每个字符串被储存了两次</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>C Primer Plus 笔记</p><p><a href="https://bakaft.github.io/2020/07/19/C-Primer-Plus-笔记/">https://bakaft.github.io/2020/07/19/C-Primer-Plus-笔记/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>BakaFT</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-07-19</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-12-28</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/C/">C</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/07/25/C%E4%B8%ADconst%E4%BF%AE%E9%A5%B0%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E4%B8%8D%E5%90%8C%E6%83%85%E5%86%B5/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">C中const修饰指针变量的不同情况</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/07/16/C-Primer-Plus-%E7%BB%83%E4%B9%A0%E6%9C%AC/"><span class="level-item">C Primer Plus 练习本</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#简介"><span class="level-left"><span class="level-item">1</span><span class="level-item">简介</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#逗号表达式"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">逗号表达式</span></span></a></li></ul></li><li><a class="level is-mobile" href="#7"><span class="level-left"><span class="level-item">2</span><span class="level-item">7</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#else-if-的本质"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">else if 的本质</span></span></a></li><li><a class="level is-mobile" href="#else-与-if-的配对规则"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">else 与 if 的配对规则</span></span></a></li><li><a class="level is-mobile" href="#条件运算符"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">条件运算符</span></span></a></li><li><a class="level is-mobile" href="#switch-语句"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">switch 语句</span></span></a></li><li><a class="level is-mobile" href="#goto-语句"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">goto 语句</span></span></a></li></ul></li><li><a class="level is-mobile" href="#9"><span class="level-left"><span class="level-item">3</span><span class="level-item">9</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#return-语句"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">return 语句</span></span></a></li><li><a class="level is-mobile" href="#间接运算符"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">间接运算符</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#声明指针"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">声明指针</span></span></a></li><li><a class="level is-mobile" href="#求值-解引用"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">求值(解引用)</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#10"><span class="level-left"><span class="level-item">4</span><span class="level-item">10</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#未指定长度的不可变数组"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">未指定长度的不可变数组</span></span></a></li><li><a class="level is-mobile" href="#指定初始化容器-C99"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">指定初始化容器(C99)</span></span></a></li><li><a class="level is-mobile" href="#数组下标越界的后果"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">数组下标越界的后果</span></span></a></li><li><a class="level is-mobile" href="#VLA-C99"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">VLA(C99)</span></span></a></li><li><a class="level is-mobile" href="#二维数组"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">二维数组</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#初始化"><span class="level-left"><span class="level-item">4.5.1</span><span class="level-item">初始化</span></span></a></li><li><a class="level is-mobile" href="#二维数组的”内层越界”"><span class="level-left"><span class="level-item">4.5.2</span><span class="level-item">二维数组的”内层越界”</span></span></a></li></ul></li><li><a class="level is-mobile" href="#数组与指针"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">数组与指针</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#数组名其实是一个常量指针"><span class="level-left"><span class="level-item">4.6.1</span><span class="level-item">数组名其实是一个常量指针</span></span></a></li><li><a class="level is-mobile" href="#指针-1-在数组中的体现"><span class="level-left"><span class="level-item">4.6.2</span><span class="level-item">指针+1 在数组中的体现</span></span></a></li><li><a class="level is-mobile" href="#C-对数组的定义"><span class="level-left"><span class="level-item">4.6.3</span><span class="level-item">C 对数组的定义</span></span></a></li><li><a class="level is-mobile" href="#如何在函数形参表示数组"><span class="level-left"><span class="level-item">4.6.4</span><span class="level-item">如何在函数形参表示数组</span></span></a></li></ul></li><li><a class="level is-mobile" href="#不要在函数内求数组大小"><span class="level-left"><span class="level-item">4.7</span><span class="level-item">不要在函数内求数组大小</span></span></a></li><li><a class="level is-mobile" href="#指针操作"><span class="level-left"><span class="level-item">4.8</span><span class="level-item">指针操作</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#赋值"><span class="level-left"><span class="level-item">4.8.1</span><span class="level-item">赋值</span></span></a></li><li><a class="level is-mobile" href="#解引用"><span class="level-left"><span class="level-item">4.8.2</span><span class="level-item">解引用</span></span></a></li><li><a class="level is-mobile" href="#取址"><span class="level-left"><span class="level-item">4.8.3</span><span class="level-item">取址</span></span></a></li><li><a class="level is-mobile" href="#递增-减"><span class="level-left"><span class="level-item">4.8.4</span><span class="level-item">递增(减)</span></span></a></li><li><a class="level is-mobile" href="#与整数相加-减"><span class="level-left"><span class="level-item">4.8.5</span><span class="level-item">与整数相加(减)</span></span></a></li><li><a class="level is-mobile" href="#指针求差"><span class="level-left"><span class="level-item">4.8.6</span><span class="level-item">指针求差</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Const-指针"><span class="level-left"><span class="level-item">4.9</span><span class="level-item">Const 指针</span></span></a></li><li><a class="level is-mobile" href="#指针和多维数组"><span class="level-left"><span class="level-item">4.10</span><span class="level-item">指针和多维数组</span></span></a></li><li><a class="level is-mobile" href="#指向多维数组的指针"><span class="level-left"><span class="level-item">4.11</span><span class="level-item">指向多维数组的指针</span></span></a></li><li><a class="level is-mobile" href="#复合字面量-C99"><span class="level-left"><span class="level-item">4.12</span><span class="level-item">复合字面量(C99)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#11"><span class="level-left"><span class="level-item">5</span><span class="level-item">11</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#字符串字面量"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">字符串字面量</span></span></a></li><li><a class="level is-mobile" href="#字符串字面量和字符串数组"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">字符串字面量和字符串数组</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">BakaFT&#039;s blog</a><p class="is-size-7"><span>&copy; 2023 BakaFT</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://fastly.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://fastly.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://fastly.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://fastly.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://fastly.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://fastly.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>